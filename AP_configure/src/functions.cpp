#include "functions.h"
#include "main.h"

//-------------------------------------------------------------------------------
bool WiFiConnectionState(void)
{
	bool state = false;
	if( WiFi.status() == WL_CONNECTED ) state = true;
	if( WiFi.status() == WL_CONNECTED && WiFi.localIP().toString() == "0.0.0.0" ) state = false;
	return state;
}

//-------------------------------------------------------------------------------
void wifi_AP_init(void)
{
	char ssid[ ESP_AP_SSID_MAX_LEN ];
	char skey[ ESP_AP_KEY_MAX_LEN ];

	WiFi.hostname( DEVICE_NAME );
	WiFi.disconnect();
	
	delay( 600 );

	WiFi.mode( WiFiMode_t::WIFI_AP );
	WiFi.softAPConfig( apIP, apIP, apMASK );

	bool success = esp::readAPconfig( ssid, skey );
	
	if( !success ){
		WiFi.softAP( DEVICE_NAME, "1234567890" );
	}else{
		WiFi.softAP( ssid, skey );
	}

	delay( 600 );
}

//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------
//-------------------------------------------------------------------------------


